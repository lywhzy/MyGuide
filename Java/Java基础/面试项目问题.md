### SpringCloud

Ribborn的重试机制首先引发出接口的幂等性问题。当时，前台新建了一个会诊之后，需要为会诊创建一个聊天室，并为其拉取成员，但有时能拉去成功，有时不能
从日志上看，是拉去了重复人员。最后发现是在拉取时，由于由于ReadTimeOut参数设置太小导致Ribborn触发重试，且调用了另一个系统的这个接口，最后出现
重复拉取的情况。然后，在修改参数后，经之后访问，又造成Hystrix的熔断，此后又将Hystrix的参数上调，才解决问题。

根据MDT的ID生成一个全局id，


### web树

诊病流程的数据结构是一棵树，一开始通过为每一行数据后增加父节点的字段来解决，但是这样无法通过sql一次性查询整棵树，便采用一种特殊的数据结构，为其
增加两个字段，使其左字段小于其子树的左字段，右字段大于其子树的右字段。通过这种方式，查询整颗流程树。


### 剩余比赛报名人数

针对单机情况下，可以使用synchornized进行同步，串行化所有的报名请求，在多机情况下，使用分布式锁技术串行化报名请求。
对于热点比赛 需要做资源的倾斜 分配更多的jvm队列对其进行处理


### 有哪些地方加索引 

column_value 的 栏目id上加索引 因为column_value的数据是最多的 查询效率最慢
    
    
### 有哪些地方用到redis

- 比赛的热门程度 通过zSet类型存储当前比赛和比赛的报名人数，以比赛的报名人数排序。可以从数据库中拿，最好还是通过set的方法改变数值

- 比赛栏目 缓存

- 保存的数据放到redis中

- 使用set保存已经提交的人，防止重复提交


